{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nlet Bloquechat = class Bloquechat {\n  constructor(chatsService, route) {\n    this.chatsService = chatsService;\n    this.route = route;\n    this.textinputPlaceholder = 'Mensaje';\n    this.nombre = '';\n    this.rootClassName = '';\n    this.imageAlt = 'image';\n    this.imageSrc = '/assets/icono_profesora-200h.png';\n    this.enviadorId = '';\n    this.destinatarioId = '';\n    this.mensaje = '';\n    this.chatId = null;\n    this.mensajes = [];\n  }\n  ngOnInit() {\n    // this.enviadorId = this.route.snapshot.paramMap.get('userId'); // Obtener el userId del enrutador\n    this.chatId = this.route.snapshot.paramMap.get('id'); // Obtener el chatId del enrutador\n    this.loadMessages();\n  }\n  loadMessages() {\n    if (this.chatId) {\n      this.chatsService.getMessagesByChatId(this.chatId).subscribe(mensajes => {\n        this.mensajes = mensajes;\n      }, error => {\n        console.error('Error al cargar los mensajes:', error);\n      });\n    }\n  }\n  onEnter() {\n    if (this.mensaje.trim().length > 0 && this.enviadorId && this.chatId) {\n      const nuevoMensaje = {\n        id: this.chatId,\n        enviador: this.enviadorId,\n        destinatario: this.destinatarioId,\n        mensaje: this.mensaje.trim(),\n        fecha: new Date()\n      };\n      this.chatsService.addMessageToChat(nuevoMensaje).subscribe(() => {\n        this.mensaje = ''; // Limpiar el campo de entrada\n        this.loadMessages(); // Recargar los mensajes\n      }, error => {\n        console.error('Error al enviar el mensaje:', error);\n      });\n    }\n  }\n};\n__decorate([Input()], Bloquechat.prototype, \"textinputPlaceholder\", void 0);\n__decorate([Input()], Bloquechat.prototype, \"nombre\", void 0);\n__decorate([Input()], Bloquechat.prototype, \"rootClassName\", void 0);\n__decorate([Input()], Bloquechat.prototype, \"imageAlt\", void 0);\n__decorate([Input()], Bloquechat.prototype, \"imageSrc\", void 0);\n__decorate([Input()], Bloquechat.prototype, \"enviadorId\", void 0);\n__decorate([Input()], Bloquechat.prototype, \"destinatarioId\", void 0);\nBloquechat = __decorate([Component({\n  selector: 'app-bloquechat',\n  templateUrl: 'bloquechat.component.html',\n  styleUrls: ['bloquechat.component.css']\n})], Bloquechat);\nexport { Bloquechat };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}