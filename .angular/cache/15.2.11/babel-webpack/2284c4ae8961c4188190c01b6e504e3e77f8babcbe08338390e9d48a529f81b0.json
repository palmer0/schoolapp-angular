{"ast":null,"code":"import { Observable } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nexport let UsuariosService = /*#__PURE__*/(() => {\n  class UsuariosService {\n    constructor(firestore) {\n      this.firestore = firestore;\n    }\n    /* agregarAlumno(usuario: Usuario): Observable<void> {\r\n      return from(this.firestore.collection('usuarios').add(usuario)).pipe(\r\n        map(() => undefined),\r\n        catchError((error) => {\r\n          console.error('Error en agregarUsuario', error);\r\n          throw error;\r\n        })\r\n      );\r\n    } */\n    agregarAlumno(usuario) {\n      return new Observable(observer => {\n        this.getRol('alumno').subscribe(rol => {\n          usuario.rol = rol; // Asigna el rol obtenido al usuario\n          this.firestore.collection('usuarios').add(usuario).then(() => {\n            observer.next();\n            observer.complete();\n          }, error => {\n            observer.error(error);\n          });\n        }, error => {\n          observer.error(error);\n        });\n      });\n    }\n    getRol(rolId) {\n      return new Observable(observer => {\n        this.firestore.collection('roles').doc(rolId).get().subscribe(doc => {\n          if (doc.exists) {\n            observer.next(doc.data());\n            observer.complete();\n          } else {\n            observer.error(new Error('Rol no encontrado'));\n          }\n        }, error => {\n          observer.error(error);\n        });\n      });\n    }\n  }\n  UsuariosService.ɵfac = function UsuariosService_Factory(t) {\n    return new (t || UsuariosService)(i0.ɵɵinject(i1.AngularFirestore));\n  };\n  UsuariosService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UsuariosService,\n    factory: UsuariosService.ɵfac,\n    providedIn: 'root'\n  });\n  return UsuariosService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}